#define REGENERATION_DELAY 60

/datum/species/dreoghur
	// Spaceproof zombies.
	name = "\improper Dreoghur"
	id = SPECIES_DREOGHUR
	sexes = 0
	icon = 'icons/mobs/human_races/dreoghur.dmi'
	changesource_flags = MIRROR_BADMIN | WABBAJACK | MIRROR_PRIDE | MIRROR_MAGIC | RACE_SWAP | ERT_SPAWN
	loreblurb = "Some cool lore statement about the species goes here."
	species_traits = list(NOBLOOD,NOZOMBIE,NOTRANSSTING)
	inherent_traits = list(
		TRAIT_NOMETABOLISM,
		TRAIT_TOXIMMUNE,
		TRAIT_RESISTCOLD, // yay
		TRAIT_RESISTLOWPRESSURE,
		TRAIT_RADIMMUNE,
		TRAIT_EASYDISMEMBER,
		TRAIT_LIMBATTACHMENT,
		TRAIT_NOBREATH, // yay
		TRAIT_NODEATH,
		TRAIT_FAKEDEATH,
		TRAIT_NOCLONELOSS,
		TRAIT_SPACEWALK, // yay
		)
	inherent_biotypes = MOB_UNDEAD|MOB_HUMANOID
	liked_food = GROSS | MEAT | RAW
	disliked_food = NONE

	mutanteyes = /obj/item/organ/eyes/night_vision/ // Night vision - could be customized further
	mutanttongue = /obj/item/organ/tongue/dreoghur // Unique tongue so we can customize say verbs, see tongue section below
	species_language_holder = /datum/language_holder/dreoghur

	var/regen_cooldown = 0

	var/static/list/spooks = list(
	'sound/hallucinations/growl1.ogg',
	'sound/hallucinations/growl2.ogg',
	'sound/hallucinations/growl3.ogg',
	'sound/hallucinations/veryfar_noise.ogg',
	'sound/hallucinations/wail.ogg'
	) // Standard zombie noises

	bodytemp_normal = T0C // Body temperature matches the environment
	min_temp_comfortable = 1 // Should be good for space but not absolute zero
	max_temp_comfortable = 270 // Uncomfortable temp - they don't take damage, but the HUD will warn them it's hot
	bodytemp_cold_damage_limit = 0
	bodytemp_heat_damage_limit = 285 // They start taking damage at slightly below room temperature
	heatmod = 1.5 // = 1.5x heat damage
	burnmod = 1.5 // = 1.5x burn damage

	species_chest = /obj/item/bodypart/chest/dreoghur
	species_head = /obj/item/bodypart/head/dreoghur
	species_l_arm = /obj/item/bodypart/l_arm/dreoghur
	species_r_arm = /obj/item/bodypart/r_arm/dreoghur
	species_l_leg = /obj/item/bodypart/leg/left/dreoghur
	species_r_leg = /obj/item/bodypart/leg/right/dreoghur

/datum/species/dreoghur/natural_bodytemperature_stabilization(datum/gas_mixture/environment, mob/living/carbon/human/H) // Body temp doesn't stabilize on its own
	return

// Optional stuff lifted from infectious zombies, could be removed or put under an infectious subtype //

/datum/species/dreoghur/spec_stun(mob/living/carbon/human/H,amount)
	. = min(20, amount) // Reduced stun

/datum/species/dreoghur/apply_damage(damage, damagetype = BRUTE, def_zone = null, blocked, mob/living/carbon/human/H, forced = FALSE, sharpness = FALSE)
	. = ..()
	if(.)
		regen_cooldown = world.time + REGENERATION_DELAY // Delayed regen, to balance the above

// Tongue //

/obj/item/organ/tongue/dreoghur
	name = "decomposing tongue" // Change this to whatever
	desc = "This tongue is decomposing, which probably renders it substantially less useful."
	icon_state = "tonguedreoghur"
	say_mod = "moans"
	modifies_speech = TRUE
	taste_sensitivity = 32

/obj/item/organ/tongue/dreoghur/handle_speech(datum/source, list/speech_args) // Currently the same as zombie speech
	var/list/message_list = splittext(speech_args[SPEECH_MESSAGE], " ")
	var/maxchanges = max(round(message_list.len / 1.5), 2)

	for(var/i = rand(maxchanges / 2, maxchanges), i > 0, i--)
		var/insertpos = rand(1, message_list.len - 1)
		var/inserttext = message_list[insertpos]

		if(!(copytext(inserttext, -3) == "...")) // Randomly inserts ellipses
			message_list[insertpos] = inserttext + "..."

		if(prob(20) && message_list.len > 3)
			message_list.Insert(insertpos, "[pick("BRAINS", "Brains", "Braaaiinnnsss", "BRAAAIIINNSSS")]...") // Randomly inserted phrases go here

	speech_args[SPEECH_MESSAGE] = jointext(message_list, " ")

// Other body parts //

/obj/item/bodypart/head/dreoghur
	limb_id = "dreoghur"
	is_dimorphic = FALSE
	should_draw_greyscale = FALSE

/obj/item/bodypart/chest/dreoghur
	limb_id = "dreoghur"
	is_dimorphic = FALSE
	should_draw_greyscale = FALSE

/obj/item/bodypart/l_arm/dreoghur
	limb_id = "dreoghur"
	should_draw_greyscale = FALSE

/obj/item/bodypart/r_arm/dreoghur
	limb_id = "dreoghur"
	should_draw_greyscale = FALSE

/obj/item/bodypardreoghurt/leg/left/dreoghur
	limb_id = "dreoghur"
	should_draw_greyscale = FALSE

/obj/item/bodypart/leg/right/dreoghur
	limb_id = "dreoghur"
	should_draw_greyscale = FALSE

#undef REGENERATION_DELAY
