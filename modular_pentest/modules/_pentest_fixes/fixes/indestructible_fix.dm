/*

	Corrects instances of indestructible items being able to be destroyed or manipulated by players.area

	indestructible Windows's now ignore deconstruct_act
	indestructible Grille's now ignore deconstruct_act (They were not able to be Plasmacut before but to make sure)
	indestructible Grille's now ignore wirecutters and screwdrivers
	Outpost Door's now ignore deconstruction_act

*/


// indestructible WINDOWS
/obj/structure/window/reinforced/fulltile/indestructible
	name = "Reinforced Window"
	can_be_unanchored = FALSE
	explosion_block = 50
	max_integrity = 10000000

/obj/structure/window/reinforced/fulltile/indestructible/attackby(obj/item/W, mob/user, params)
	to_chat(user, span_warning("[src] cannot be deconstructed or broken!"))
	return FALSE

/obj/structure/window/reinforced/fulltile/indestructible/deconstruct_act(mob/living/user, obj/item/I)
	if(I.tool_behaviour == TOOL_DECONSTRUCT)
		to_chat(user, span_warning("[src] cannot be deconstructed!"))
		return FALSE


// indestructible GRILLE
/obj/structure/grille/indestructible
	can_be_unanchored = FALSE
	explosion_block = 50
	max_integrity = 10000000

/obj/structure/grille/indestructible/attackby(obj/item/W, mob/user, params)
	if(W.tool_behaviour == TOOL_WIRECUTTER)
		return FALSE
	else if((W.tool_behaviour == TOOL_SCREWDRIVER) && (isturf(loc) || anchored))
		return FALSE
	else if(istype(W, /obj/item/stack/rods) && broken)
		return FALSE

/obj/structure/grille/indestructible/deconstruct_act(mob/living/user)
	to_chat(user, span_warning("[src] cannot be deconstructed!"))
	return FALSE


// OUTPOST DOORS
/obj/machinery/door/airlock/outpost/deconstruct_act(mob/living/user)
	to_chat(user, span_warning("[src] cannot be deconstructed!"))
	return FALSE

/obj/machinery/door/airlock/outpost/attackby(obj/item/W, mob/user, params)
	if(W.tool_behaviour == TOOL_SCREWDRIVER)
		return FALSE
	else if(W.tool_behaviour == TOOL_CROWBAR)
		return FALSE

// OUTPOST WINDOORS
/obj/machinery/door/window/brigdoor/eastleft/outpost
	name = "Outpost WinDoor"

/obj/machinery/door/window/brigdoor/eastleft/attackby(obj/item/W, mob/user, params)
	return FALSE

/obj/machinery/door/window/brigdoor/eastleft/outpost/deconstruct_act(mob/living/user)
	to_chat(user, span_warning("[src] cannot be deconstructed!"))
	return FALSE

/obj/machinery/door/window/brigdoor/eastright/outpost
	name = "Outpost WinDoor"

/obj/machinery/door/window/brigdoor/eastright/attackby(obj/item/W, mob/user, params)
	return FALSE

/obj/machinery/door/window/brigdoor/eastright/outpost/deconstruct_act(mob/living/user)
	to_chat(user, span_warning("[src] cannot be deconstructed!"))
	return FALSE

/obj/machinery/door/window/brigdoor/northleft/outpost
	name = "Outpost WinDoor"

/obj/machinery/door/window/brigdoor/northleft/attackby(obj/item/W, mob/user, params)
	return FALSE

/obj/machinery/door/window/brigdoor/northleft/outpost/deconstruct_act(mob/living/user)
	to_chat(user, span_warning("[src] cannot be deconstructed!"))
	return FALSE

/obj/machinery/door/window/brigdoor/northright/outpost
	name = "Outpost WinDoor"

/obj/machinery/door/window/brigdoor/northright/attackby(obj/item/W, mob/user, params)
	return FALSE

/obj/machinery/door/window/brigdoor/northright/outpost/deconstruct_act(mob/living/user)
	to_chat(user, span_warning("[src] cannot be deconstructed!"))
	return FALSE

/obj/machinery/door/window/brigdoor/southleft/outpost
	name = "Outpost WinDoor"

/obj/machinery/door/window/brigdoor/southleft/attackby(obj/item/W, mob/user, params)
	return FALSE

/obj/machinery/door/window/brigdoor/southleft/outpost/deconstruct_act(mob/living/user)
	to_chat(user, span_warning("[src] cannot be deconstructed!"))
	return FALSE

/obj/machinery/door/window/brigdoor/southright/outpost
	name = "Outpost WinDoor"

/obj/machinery/door/window/brigdoor/southright/attackby(obj/item/W, mob/user, params)
	return FALSE

/obj/machinery/door/window/brigdoor/southright/outpost/deconstruct_act(mob/living/user)
	to_chat(user, span_warning("[src] cannot be deconstructed!"))
	return FALSE

/obj/machinery/door/window/brigdoor/westleft/outpost
	name = "Outpost WinDoor"

/obj/machinery/door/window/brigdoor/westleft/attackby(obj/item/W, mob/user, params)
	return FALSE

/obj/machinery/door/window/brigdoor/westleft/outpost/deconstruct_act(mob/living/user)
	to_chat(user, span_warning("[src] cannot be deconstructed!"))
	return FALSE

/obj/machinery/door/window/brigdoor/westright/outpost
	name = "Outpost WinDoor"

/obj/machinery/door/window/brigdoor/westright/attackby(obj/item/W, mob/user, params)
	return FALSE

/obj/machinery/door/window/brigdoor/westright/outpost/deconstruct_act(mob/living/user)
	to_chat(user, span_warning("[src] cannot be deconstructed!"))
	return FALSE

// OUTPOST APCS
/obj/machinery/power/apc/auto_name/directional/north/outpost

/obj/machinery/power/apc/auto_name/directional/south/outpost

/obj/machinery/power/apc/auto_name/directional/east/outpost

/obj/machinery/power/apc/auto_name/directional/west/outpost

/obj/machinery/power/apc/auto_name/directional/north/outpost/emp_act(severity)
	return

/obj/machinery/power/apc/auto_name/directional/south/outpost/emp_act(severity)
	return

/obj/machinery/power/apc/auto_name/directional/east/outpost/emp_act(severity)
	return

/obj/machinery/power/apc/auto_name/directional/west/outpost/emp_act(severity)
	return

// PHAZON
/proc/is_phase_blocker(atom/obstacle)
	if (!obstacle)
		return FALSE

	return (\
		istype(obstacle, /turf/closed/indestructible) || \
		istype(obstacle, /obj/machinery/door/poddoor/ert) || \
		istype(obstacle, /obj/structure/window/reinforced/fulltile/indestructible) || \
		istype(obstacle, /obj/structure/grille/indestructible) || \
		istype(obstacle, /obj/machinery/door/airlock/outpost) \
	)
